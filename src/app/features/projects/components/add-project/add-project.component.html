<div class="max-w-3xl mx-auto p-8 bg-gradient-to-br from-white to-amber-50 rounded-2xl shadow-xl border-2 border-amber-200">
  <header class="mb-8">
    <h2 class="text-3xl font-serif font-bold bg-gradient-to-r from-amber-700 to-amber-900 bg-clip-text text-transparent">
      Nouveau Projet
    </h2>
    <p class="text-stone-600 font-sans mt-2">Remplissez les informations du projet</p>
  </header>

  <form #projectForm="ngForm" (ngSubmit)="onSubmit(projectForm)" class="space-y-6">
    
    <!-- Grid 2 colonnes pour Nom et Statut -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Nom du projet -->
      <div>
        <label for="name" class="block text-sm font-sans font-semibold text-stone-700 mb-2">
          Nom du projet <span class="text-red-500">*</span>
        </label>
        <input
          type="text"
          id="name"
          name="name"
          [(ngModel)]="project.name"
          #nameInput="ngModel"
          required
          minlength="4"
          placeholder="Ex: Application e-commerce"
          class="w-full px-4 py-3 border-2 border-amber-300 rounded-xl font-sans
                 focus:border-amber-600 focus:ring-4 focus:ring-amber-200
                 bg-white text-stone-900
                 transition-all duration-300 outline-none
                 placeholder:text-stone-400"
          [class.border-red-500]="nameInput.invalid && nameInput.touched"
        />
        <div *ngIf="nameInput.invalid && nameInput.touched" class="mt-2 text-sm text-red-600 font-sans">
          <p *ngIf="nameInput.errors?.['required']">⚠️ Le nom du projet est obligatoire</p>
          <p *ngIf="nameInput.errors?.['minlength']">⚠️ Minimum 4 caractères</p>
        </div>
      </div>

      <!-- Statut -->
      <div>
        <label for="status" class="block text-sm font-sans font-semibold text-stone-700 mb-2">
          Statut <span class="text-red-500">*</span>
        </label>
        <select
          id="status"
          name="status"
          [(ngModel)]="project.status"
          #statusInput="ngModel"
          required
          class="w-full px-4 py-3 border-2 border-amber-300 rounded-xl font-sans
                 focus:border-green-600 focus:ring-4 focus:ring-green-200
                 bg-white text-stone-900
                 transition-all duration-300 outline-none cursor-pointer"
          [class.border-red-500]="statusInput.invalid && statusInput.touched"
        >
          <option value="">Sélectionner...</option>
          <option value="En attente">En attente</option>
          <option value="En cours">En cours</option>
          <option value="Terminé">Terminé</option>
        </select>
        <div *ngIf="statusInput.invalid && statusInput.touched" class="mt-2 text-sm text-red-600 font-sans">
          <p *ngIf="statusInput.errors?.['required']">⚠️ Sélectionnez un statut</p>
        </div>
      </div>
    </div>

    <!-- Grid 2 colonnes pour Catégorie et Sous-catégorie -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Catégorie -->
      <div>
        <label for="category" class="block text-sm font-sans font-semibold text-stone-700 mb-2">
          Catégorie <span class="text-red-500">*</span>
        </label>
        <select
          id="category"
          name="category"
          [(ngModel)]="project.category"
          (ngModelChange)="onCategoryChange()"
          #categoryInput="ngModel"
          required
          class="w-full px-4 py-3 border-2 border-amber-300 rounded-xl font-sans
                 focus:border-purple-600 focus:ring-4 focus:ring-purple-200
                 bg-white text-stone-900
                 transition-all duration-300 outline-none cursor-pointer"
          [class.border-red-500]="categoryInput.invalid && categoryInput.touched"
        >
          <option value="">Sélectionner...</option>
          <option *ngFor="let cat of categories" [value]="cat.name">{{ cat.name }}</option>
        </select>
        <div *ngIf="categoryInput.invalid && categoryInput.touched" class="mt-2 text-sm text-red-600 font-sans">
          <p *ngIf="categoryInput.errors?.['required']">⚠️ Sélectionnez une catégorie</p>
        </div>
      </div>

      <!-- Sous-catégorie -->
      <div>
        <label for="subCategory" class="block text-sm font-sans font-semibold text-stone-700 mb-2">
          Sous-catégorie <span class="text-red-500">*</span>
        </label>
        <select
          id="subCategory"
          name="subCategory"
          [(ngModel)]="project.subCategory"
          #subCategoryInput="ngModel"
          required
          [disabled]="!project.category"
          class="w-full px-4 py-3 border-2 border-amber-300 rounded-xl font-sans
                 focus:border-purple-600 focus:ring-4 focus:ring-purple-200
                 bg-white text-stone-900
                 transition-all duration-300 outline-none cursor-pointer
                 disabled:bg-stone-100 disabled:cursor-not-allowed disabled:opacity-60"
          [class.border-red-500]="subCategoryInput.invalid && subCategoryInput.touched"
        >
          <option value="">{{ project.category ? 'Sélectionner...' : 'Choisissez d\'abord une catégorie' }}</option>
          <option *ngFor="let sub of filteredSubCategories" [value]="sub">{{ sub }}</option>
        </select>
        <div *ngIf="subCategoryInput.invalid && subCategoryInput.touched" class="mt-2 text-sm text-red-600 font-sans">
          <p *ngIf="subCategoryInput.errors?.['required']">⚠️ Sélectionnez une sous-catégorie</p>
        </div>
      </div>
    </div>

    <!-- Description pleine largeur -->
    <div>
      <label for="description" class="block text-sm font-sans font-semibold text-stone-700 mb-2">
        Description <span class="text-red-500">*</span>
      </label>
      <textarea
        id="description"
        name="description"
        [(ngModel)]="project.description"
        #descInput="ngModel"
        required
        rows="4"
        placeholder="Décrivez votre projet en détail..."
        class="w-full px-4 py-3 border-2 border-amber-300 rounded-xl font-sans
               focus:border-indigo-600 focus:ring-4 focus:ring-indigo-200
               bg-white text-stone-900
               transition-all duration-300 outline-none resize-none
               placeholder:text-stone-400"
        [class.border-red-500]="descInput.invalid && descInput.touched"
      ></textarea>
      <div *ngIf="descInput.invalid && descInput.touched" class="mt-2 text-sm text-red-600 font-sans">
        <p *ngIf="descInput.errors?.['required']">⚠️ La description est obligatoire</p>
      </div>
    </div>

    <!-- Boutons -->
    <div class="flex gap-4 pt-6">
      <button
        type="submit"
        [disabled]="projectForm.invalid"
        class="flex-1 px-8 py-3.5 bg-gradient-to-r from-amber-700 to-amber-800 
               text-white font-sans font-semibold rounded-xl
               shadow-lg shadow-amber-500/50 hover:shadow-xl hover:shadow-amber-500/60
               hover:from-amber-800 hover:to-amber-900
               disabled:from-stone-300 disabled:to-stone-400 
               disabled:shadow-none disabled:cursor-not-allowed
               transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]
               disabled:transform-none disabled:opacity-60"
      >
        Enregistrer le projet
      </button>
      <button
        type="button"
        (click)="onReset(projectForm)"
        class="px-8 py-3.5 bg-white 
               text-stone-700 font-sans font-semibold rounded-xl
               border-2 border-amber-300
               hover:bg-amber-50 
               hover:border-amber-400
               transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98]"
      >
        Réinitialiser
      </button>
    </div>

  </form>
</div>
